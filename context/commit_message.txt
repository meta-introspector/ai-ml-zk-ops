fix: Refactor flake.nix to use flake-utils.lib.eachDefaultSystem

Modified `flake.nix` to use `flake-utils.lib.eachDefaultSystem` to correctly handle `builtins.currentSystem`.
This addresses the 'attribute currentSystem missing' error and improves flake compatibility across different systems.